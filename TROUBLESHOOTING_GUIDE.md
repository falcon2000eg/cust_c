# دليل استكشاف الأخطاء - نظام إدارة مشاكل العملاء

## المشكلة: رسالة خطأ تظهر وتختفي بسرعة عند تحميل النافذة الرئيسية

### الخطوات لتحديد المشكلة:

#### 1. تشغيل التطبيق مع التصحيح
```bash
# تشغيل السكريبت المرفق
run_with_debug.bat
```

#### 2. فتح نافذة التشخيص
1. افتح التطبيق
2. اذهب إلى القائمة الرئيسية
3. اختر "التشخيص" أو "Diagnostic"
4. ستظهر نافذة التشخيص مع سجل مفصل

#### 3. اختبار قاعدة البيانات
في نافذة التشخيص:
1. اضغط على "اختبار قاعدة البيانات"
2. تحقق من النتائج في السجل
3. إذا كان هناك خطأ، سجل التفاصيل

#### 4. اختبار الخدمات
في نافذة التشخيص:
1. اضغط على "اختبار الخدمات"
2. تحقق من النتائج في السجل
3. إذا كان هناك خطأ، سجل التفاصيل

### الأسباب المحتملة للمشكلة:

#### 1. مشاكل قاعدة البيانات
- **السبب**: عدم وجود قاعدة البيانات أو مشاكل في الاتصال
- **الحل**: 
  - تحقق من وجود ملف `CustomerIssues.db`
  - تأكد من صلاحيات الكتابة في المجلد
  - احذف الملف وأعد تشغيل التطبيق لإنشاء قاعدة بيانات جديدة

#### 2. مشاكل في الخدمات
- **السبب**: فشل في تحميل الخدمات أو البيانات
- **الحل**:
  - تحقق من وجود جميع الملفات المطلوبة
  - تأكد من صحة إعدادات التطبيق

#### 3. مشاكل في واجهة المستخدم
- **السبب**: أخطاء في ربط البيانات أو تحميل العناصر
- **الحل**:
  - تحقق من وجود جميع ملفات XAML
  - تأكد من صحة تعريف العناصر

#### 4. مشاكل في التصريح
- **السبب**: عدم وجود صلاحيات كافية
- **الحل**:
  - شغل التطبيق كمسؤول
  - تحقق من صلاحيات المجلد

### خطوات التشخيص التفصيلية:

#### الخطوة 1: فحص ملفات السجل
```
CustomerIssuesManager\bin\Debug\net8.0-windows\logs\
```
- افحص أحدث ملف سجل
- ابحث عن رسائل الخطأ

#### الخطوة 2: فحص قاعدة البيانات
```
CustomerIssuesManager\bin\Debug\net8.0-windows\CustomerIssues.db
```
- تأكد من وجود الملف
- تحقق من حجم الملف (يجب أن يكون أكبر من 0)

#### الخطوة 3: فحص الإعدادات
```
CustomerIssuesManager\bin\Debug\net8.0-windows\appsettings.json
```
- تأكد من صحة الإعدادات

### الحلول المقترحة:

#### الحل 1: إعادة إنشاء قاعدة البيانات
1. احذف ملف `CustomerIssues.db`
2. أعد تشغيل التطبيق
3. سيتم إنشاء قاعدة بيانات جديدة

#### الحل 2: تنظيف وإعادة بناء
```bash
# في مجلد المشروع
dotnet clean
dotnet build
```

#### الحل 3: فحص التبعيات
```bash
# تحديث التبعيات
dotnet restore
dotnet build
```

#### الحل 4: تشغيل كمسؤول
- انقر بزر الماوس الأيمن على التطبيق
- اختر "تشغيل كمسؤول"

### معلومات إضافية للمطورين:

#### تفعيل التصحيح التفصيلي
أضف هذه الأسطر في `App.xaml.cs`:
```csharp
System.Diagnostics.Debug.WriteLine("Debug message here");
```

#### فحص الاستثناءات غير المعالجة
تم إضافة معالج للاستثناءات غير المعالجة في `App.xaml.cs`

#### فحص سجل الأحداث
- افتح "Event Viewer" في Windows
- ابحث عن أخطاء متعلقة بالتطبيق

### الاتصال بالدعم:
إذا استمرت المشكلة:
1. التقط لقطة شاشة للخطأ
2. انسخ محتوى ملف السجل
3. ارفق معلومات النظام (Windows version, .NET version)
4. أرسل المعلومات إلى فريق الدعم

### ملاحظات مهمة:
- تأكد من تشغيل أحدث إصدار من .NET
- تحقق من وجود مساحة كافية على القرص
- تأكد من عدم تشغيل نسخ أخرى من التطبيق 